<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Checagem Pesquisas Vs Resultado 1 Turno 2012</title>
    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
    <link rel="stylesheet" type="text/css" href="custom.css">

</head>
<body>
    <table id="resultado_presidente">
        <thead>
            <tr>
                <th>candidato_nome</th>
                <th>cargo</th>
                <th>valor_referencia</th>
                <th>resultado_tse</th>
                <th>margem_erro</th>
                <th>diferenca</th>
                <th>acertou_margem</th>
                <th>ambito</th>
                <th>data_publicacao</th>
                <th>instituto_nome</th>
            </tr>
        </thead>
    </table>
    <table id="resultado_governador">
        <thead>
            <tr>
                <th>candidato_nome</th>
                <th>cargo</th>
                <th>valor_referencia</th>
                <th>resultado_tse</th>
                <th>margem_erro</th>
                <th>diferenca</th>
                <th>acertou_margem</th>
                <th>ambito</th>
                <th>data_publicacao</th>
                <th>instituto_nome</th>
            </tr>
        </thead>
    </table>
    <table id="resultado_senador">
        <thead>
            <tr>
                <th>candidato_nome</th>
                <th>cargo</th>
                <th>valor_referencia</th>
                <th>resultado_tse</th>
                <th>margem_erro</th>
                <th>diferenca</th>
                <th>acertou_margem</th>
                <th>ambito</th>
                <th>data_publicacao</th>
                <th>instituto_nome</th>
            </tr>
        </thead>
    </table>
    <script type="text/javascript">
        $(document).ready(function(){
            const cargos = ['presidente', 'governador', 'senador'];
            var acertos = 0;
            var totais = 0;
            for (cargo of cargos){
                $('#resultado_'+cargo).DataTable({
                    ajax: {
                        url: cargo+'.json',
                        dataSrc: ''
                    },
                    columns: [
                        { data: 'candidato_nome' },
                        { data: 'cargo' },
                        { data: 'valor_referencia' },
                        { data: 'resultado_tse' },
                        { data: 'margem_erro' },
                        { data: 'diferenca' },
                        { data: 'acertou_margem' },
                        { data: 'ambito' },
                        { data: 'data_publicacao' },
                        { data: 'instituto_nome' },
                    ],
                    createdRow: function( row, data, dataIndex){
                        if(data.acertou_margem){
                            $(row).addClass('green');
                            acertos++;
                        }
                        totais++;
                    },
                });
            }
            console.log(acertos);
            console.log(totais);
        });
    </script>
</body>
</html>